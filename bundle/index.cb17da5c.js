const b=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};b();const a={tap:new Audio("sounds/tap1.wav"),navForward:new Audio("sounds/nav1.flac"),navBackward:new Audio("sounds/nav2.flac"),refresh:new Audio("sounds/refresh.flac"),shutter:new Audio("sounds/shutter.flac")};a.tap.volume=.5;a.navForward.volume=.1;a.navBackward.volume=.2;a.shutter.volume=.05;function m(){a.tap.play()}function w(){a.refresh.play()}function y(){a.shutter.play()}function u(e=!0,t=!1){navigator.vibrate(t?20:15),e?a.navForward.play():a.navBackward.play()}var A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sounds:a,tap:m,refresh:w,shutter:y,navigate:u});const d=location.origin+(document.querySelector('head > link[rel="root"]')?.getAttribute("href")??"/");E();const i={get mains(){return document.querySelectorAll("body > main")},get main(){return this.mains[this.mains.length-1]},nav:document.querySelector("body > nav"),links:document.querySelectorAll("body > nav > [page]"),header:document.querySelector("body > header")},c={_values:[{_page:"home",get page(){return this._page},set page(e){this._page=e,f(e)}},...location.href.replace(d,"").split("/").filter(e=>e!="")],get bottom(){return this._values.length==1?this._values[0]:null},apply(){this._values.forEach((e,t)=>{t!=0&&(i.mains[t]||(i.main.insertAdjacentHTML("afterend","<main></main>"),f(e,t)))}),this.bottom&&f(this.bottom.page),g("afterload")},onback(){this.bottom||(u(!1,!0),i.main.remove(),this._values.pop(),this.apply())},async push(e){u(!0,!0),this._values.push(e),history.pushState(e,"",d+this._values.slice(1).join("/")),console.log(this._values),await this.apply()}};window.stack=c;window.onpopstate=()=>c.onback();c.apply();async function f(e,t=0){if(document.body.removeAttribute("fullview"),i.main.removeAttribute("afterload"),setTimeout(()=>i.main.setAttribute("afterload",""),0),i.main.innerHTML=await k(`/views/${e}.html`),document.querySelectorAll("[page]").forEach(o=>o.getAttribute("page")==e?o.setAttribute("active",""):o.removeAttribute("active")),!c.bottom&&(document.body.setAttribute("fullview",""),g("afterclick"),t!=0)){const o=i.mains[t].querySelector("header");o&&(o.innerHTML="<button icon navback>arrow_back</button>"+o?.innerHTML);const s=o?.querySelector("[navback]");s&&(s.onclick=()=>history.back())}}i.links.forEach(e=>e.addEventListener("click",()=>{c.bottom&&(c.bottom.page=e.getAttribute("page")),u()}));async function k(e){let o=await(await self.caches?.open("views"))?.match(e);return o||(i.nav.setAttribute("loading",""),o=await fetch(e),i.nav.removeAttribute("loading")),await o.text()}function E(){const e=window.fetch;window.fetch=(t,o)=>{if(t instanceof Request||!t.startsWith("/"))return e(t,o);const s=new URL(t,d).href;return e(s,o)}}const h={ripple(e){return e.getAttribute("ripple")!=null||e.getAttribute("page")!=null||e.nodeName=="BUTTON"||e.nodeName=="HEADER"||!1},dialog(e){return e.nodeName=="DIALOG"},view(e){return!!e.getAttribute("view")}},S=[{if:h.ripple,then(e){e.addEventListener("pointerdown",()=>v(e)),e.addEventListener("keydown",t=>{t.key=="Enter"&&v(e,10)})}},{if:h.dialog,then(e){e.setAttribute("open","")}},{if:h.view,then(e){e.onclick=()=>{const t=e.getAttribute("view");!t||c.push(t)}}}];function v(e,t=0){e.getAttribute("disabled")==null&&(e.removeAttribute("afterclick"),setTimeout(()=>e.setAttribute("afterclick",""),t),m())}function g(e){document.querySelectorAll(`[${e}]`).forEach(async t=>t.removeAttribute(e))}const L=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(o=>o.nodeName!="#text"?p(o):0)})});L.observe(document.body,{childList:!0,subtree:!0});document.querySelectorAll("body *").forEach(e=>p(e));function p(e){S.forEach(t=>{t.if(e)&&t.then(e)});for(const t in e.children){const o=e.children[t];o.getAttribute&&p(o)}}location.host!="localhost:3500"&&navigator.serviceWorker?.register(new URL("/pwa-template/sw.js",self.location).href);navigator.serviceWorker.onmessage=e=>{e.data=="update"&&location.reload()};const _=async()=>{if(!navigator.onLine){console.warn("%cCannot update caches while offline!","color: orange");return}navigator.serviceWorker.controller?.postMessage("update")};window.updateCaches=_;localStorage.getItem("intents")||localStorage.setItem("intents",JSON.stringify({"Testovac\xED rozhodnut\xED":{history:[],steps:[]},"Dal\u0161\xED rozhodnut\xED":{history:[],steps:[]}}));const q=JSON.parse(localStorage.getItem("intents"));window.intents=q;window.sounds=A;
